@model List<EToolsViewer.APIModels.GetInstanceData>
@{
    Layout = "~/Views/Shared/_EToolsLayout1.cshtml";
}
<script src="~/Scripts/moment.js"></script>
<style>
    .table-style_01 th, .table-style_01 td {
        background: #2f2f2f !important;
        color: #17bab8;
        font-size: 16px;
        text-align: center;
    }

    .table-style_02 th, .table-style_02 td {
        background: #2f2f2f !important;
        color: #ed9979;
        font-size: 16px;
        text-align: center;
    }

    .table-style_03 th, .table-style_03 td {
        background: #2f2f2f !important;
        color: #f02d99;
        font-size: 16px;
        text-align: center;
    }

    .table-style_04 th, .table-style_04 td {
        background: #2f2f2f !important;
        color: #ebd504;
        font-size: 16px;
        text-align: center;
    }

    .table-style_05 th, .table-style_05 td {
        background: #2f2f2f !important;
        color: #00adef;
        font-size: 16px;
        text-align: center;
    }

    .table-style_06 th, .table-style_06 td {
        background: #2f2f2f !important;
        color: #83c338;
        font-size: 16px;
        text-align: center;
    }

    .table-hover_01 > tbody > tr:hover > td, .table-hover_01 > tbody > tr:hover > th {
        background-color: #f00 !important;
    }

    .panel-default > .panel-heading {
        padding: 2px 10px;
    }

    .bgimg {
        background-image: url('../Content/images/SLD.png');
    }
</style>
<div class="col-lg-12">

    <div class="form-group col-md-4" style="border:0px solid #f00;">
        <h1>PLANT SLD</h1>

    </div>

</div>
<br />
@*background-image: url(/Content/images/SLD1.png); background-size: 100px 100px*@
@*kunal new abt*@
<div class="row">
    <div class="col-lg-12" style="border: 0px solid #000;">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class=" dashboard-panel-body-box" style="font-size:25px; font-weight:bold;"><h3 id="datetidvalue" style="color: lightgreen;"></h3></div>

            </div>
            <div style=" height: 960px; width: 1340px; border: 0px solid #000; background-image: url(/Content/images/Drawing10.png);">

                <button type="button" style="position: absolute; top: 193px; left: 290px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon ; margin:0px 10px;" id="btn1"></button>
                <button type="button" style="position: absolute; top: 193px; left: 935px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon ; margin:0px 10px;" id="btn2"></button>
                <button type="button" style="position: absolute; top: 385px; left: 290px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon ; margin:0px 10px;" id="btn3"></button>
                <button type="button" style="position: absolute; top: 385px; left: 935px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon ; margin:0px 10px;" id="btn4"></button>
                <button type="button" style="position: absolute; top: 385px; left: 602px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon; margin:0px 10px;" id="btn5"></button>
                <button type="button" style="position: absolute; top: 630px; left: 290px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon; margin:0px 10px;" id="btn6"></button>
                <button type="button" style="position: absolute; top: 630px; left: 935px;background-color: #ADD8E6;border: 6px; width: 183px; font-size: 25px; color:maroon; margin:0px 10px;" id="btn7"></button>
                <label id="m1" style="position: absolute; top:285px; left: 410px; width: 100%; font-size: 25px; color: maroon">0.00KV</label>
                <label id="m2" style="position: absolute; top:285px; left: 1050px; width: 100%; font-size: 25px; color: maroon">0.00KV</label>
                <label id="m3" style="position: absolute; top:285px; left: 680px; width: 100%; font-size: 25px; color: maroon"></label>
                <label id="m4" style="position: absolute; top: 560px; left: 410px; width: 100%; font-size: 25px; color: maroon; ">0.00KV</label>
                <label id="m5" style="position: absolute; top: 560px; left: 1050px; width: 100%; font-size: 25px; color: maroon; ">0.00KV</label>




            </div>
        </div>

    </div>

    <script type="text/javascript">
        var ws, w1, w2;
        var meterId = "";
        var box;
        var MeterString = "1,2,3,4,5,6,7";
        var MeterIdList = {
            "MeterString": MeterString

        };
        var ConfingArr = new Array();
        $(document).ready(function () {
            $("#btn1").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("One", "ILFS")';
            });
            $("#btn2").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("Two", "ILFS")';
            });
            $("#btn3").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("Three", "ILFS")';
            });
            $("#btn4").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("Four", "ILFS")';
            });
            $("#btn5").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("Five", "ILFS")';
            });
            $("#btn6").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("Six", "ILFS")';
            });
            $("#btn7").click(function () {
                box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
                window.location.href = '@Url.Action("Seven", "ILFS")';
            });
            ABTMeterDetails();
        });




        @*$("#btnBack").click(function () {
        box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
        window.location.href = '@Url.Action("Index", "EMSMeter")';
    });*@
        setInterval(ABTMeterDetails, 1000);
        function ABTMeterDetails() {

            $.ajax({

                type: "POST",
                url: BaseAddress + "GetAllInstanceData/",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(MeterIdList),
                dataType: "json",

                success: function (response, status, jqXHR) {

                    var jsonObj = response.Data.result;
                    debugger
                    if (jsonObj != undefined && jsonObj.length > 0) {
                        debugger
                        var line1hz = 0, line2hz = 0;
                        jsonObj.forEach(function (responseobj) {
                            if (responseobj.meterid == 1) {

                                $("#btn1").html(responseobj.kw.toFixed(2).toString()+ "MW");
                                $("#m1").html(responseobj.vll.toFixed(2).toString() + "KV");
                                line1hz = responseobj.cblk_avg_hz.toFixed(2);

                            }
                            else if (responseobj.meterid == 2) {

                                $("#btn2").html(responseobj.kw.toFixed(2).toString()+ "MW");
                                $("#m2").html(responseobj.vll.toFixed(2).toString() + "KV");
                                line2hz = responseobj.cblk_avg_hz.toFixed(2);
                            }
                            else if (responseobj.meterid == 3) {

                                $("#btn3").html(responseobj.kw.toFixed(2).toString()+ "MW");

                            }
                            else if (responseobj.meterid == 4) {

                                $("#btn4").html(responseobj.kw.toFixed(2).toString()+ "MW");

                            }
                            else if (responseobj.meterid == 5) {

                                $("#btn5").html(responseobj.kw.toFixed(2).toString()+ "MW");
                            }
                            else if (responseobj.meterid == 6) {
                                $("#m4").html(responseobj.vll.toFixed(2).toString() + "KV");
                                $("#btn6").html(responseobj.kw.toFixed(2).toString()+ "MW");
                            }
                            else if (responseobj.meterid == 7) {

                                $("#btn7").html(responseobj.kw.toFixed(2).toString()+ "MW");
                                $("#m5").html(responseobj.vll.toFixed(2).toString() + "KV");
                            }
                            var d = new Date(responseobj.Currenttstamp);
                            var month = (d.getMonth() + 1).toString();
                            if (month.toString().length == 1) {
                                month = "0" + month;
                            }
                            var hours = d.getHours().toString();
                            if (hours.length == 1) {
                                hours = "0" + hours;
                            }
                            var minutes = d.getMinutes().toString();
                            if (minutes.length == 1) {
                                minutes = "0" + minutes;
                            }
                            var seconds = d.getSeconds().toString();
                            if (seconds.length == 1) {
                                seconds = "0" + seconds;
                            }
                            var date = d.getDate() + "-" + month + "-" + d.getFullYear() + "  ;  " + hours + ":" + minutes + ":" + seconds;

                            $("#datetidvalue").text("Date & Time : " + date.toString() + '\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + " Block No. : " + responseobj.BlockNo);
                        });
                        if (line1hz > line2hz) {
                            $("#m3").html(line1hz.toString() + "Hz");
                        }
                        else {
                            $("#m3").html(line2hz.toString() + "Hz");
                        }

                    }
                },
                error: function (xhr, status, error) {
                    if (box) box.remove();
                }
            });

        }

    </script>
