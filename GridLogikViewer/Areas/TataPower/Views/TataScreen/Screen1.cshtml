@{
    ViewBag.Title = "Tata Customization Screen";
}
<style>
    .panel-default > .panel-heading {
        padding: 2px 10px;
    }

    .bgimg {
        background-image: url('../Content/images/SLD1.png');
    }
</style>
<div class="col-lg-12">

    <div class="form-group col-md-4" style="border:0px solid #f00;">
        <h2></h2>

    </div>

</div>
<h2>Screen 1</h2>
<div class="row">
    <div class="panel panel-default" style="padding:10px;">
        <div class="row">
            <div class="col-md-2 col-md-offset-1">
                <label>Date</label>
                <input class="form-control" id="datepicker" name="FromDate" readonly="readonly" type="text" value="">
            </div>
            <div id="divParam" class="col-md-2">
                <label>Parameter </label>
                <div>
                    <select id="ddlparam" size="1" class="form-control">
                        <option value="KW">KW</option>
                        <option value="KWH">KWH</option>
                    </select>
                </div>
            </div>
            <div id="divStart" class="col-md-2">
                <label>Start Time </label>
                <div>
                    <select id="ddlStart" name="DataParameter" size="1" class="form-control">
                        <option>Select</option>
                        <option>12:00 AM</option>
                        <option>12:15 AM</option>
                        <option>12:30 AM</option>
                        <option>12:45 AM</option>
                        <option>01:00 AM</option>
                        <option>01:15 AM</option>
                        <option>01:30 AM</option>
                        <option>01:45 AM</option>
                        <option>02:00 AM</option>
                        <option>02:15 AM</option>
                        <option>02:30 AM</option>
                        <option>02:45 AM</option>
                        <option>03:00 AM</option>
                        <option>03:15 AM</option>
                        <option>03:30 AM</option>
                        <option>03:45 AM</option>
                        <option>04:00 AM</option>
                        <option>04:15 AM</option>
                        <option>04:30 AM</option>
                        <option>04:45 AM</option>
                        <option>05:00 AM</option>
                        <option>05:15 AM</option>
                        <option>05:30 AM</option>
                        <option>05:45 AM</option>
                        <option>06:00 AM</option>
                        <option>06:15 AM</option>
                        <option>06:30 AM</option>
                        <option>06:45 AM</option>
                        <option>07:00 AM</option>
                        <option>07:15 AM</option>
                        <option>07:30 AM</option>
                        <option>07:45 AM</option>
                        <option>08:00 AM</option>
                        <option>08:15 AM</option>
                        <option>08:30 AM</option>
                        <option>08:45 AM</option>
                        <option>09:00 AM</option>
                        <option>09:15 AM</option>
                        <option>09:30 AM</option>
                        <option>09:45 AM</option>
                        <option>10:00 AM</option>
                        <option>10:15 AM</option>
                        <option>10:30 AM</option>
                        <option>10:45 AM</option>
                        <option>11:00 AM</option>
                        <option>11:15 AM</option>
                        <option>11:30 AM</option>
                        <option>11:45 AM</option>
                        <option>12:00 PM</option>
                        <option>12:15 PM</option>
                        <option>12:30 PM</option>
                        <option>12:45 PM</option>
                        <option>01:00 PM</option>
                        <option>01:15 PM</option>
                        <option>01:30 PM</option>
                        <option>01:45 PM</option>
                        <option>02:00 PM</option>
                        <option>02:15 PM</option>
                        <option>02:30 PM</option>
                        <option>02:45 PM</option>
                        <option>03:00 PM</option>
                        <option>03:15 PM</option>
                        <option>03:30 PM</option>
                        <option>03:45 PM</option>
                        <option>04:00 PM</option>
                        <option>04:15 PM</option>
                        <option>04:30 PM</option>
                        <option>04:45 PM</option>
                        <option>05:00 PM</option>
                        <option>05:15 PM</option>
                        <option>05:30 PM</option>
                        <option>05:45 PM</option>
                        <option>06:00 PM</option>
                        <option>06:15 PM</option>
                        <option>06:30 PM</option>
                        <option>06:45 PM</option>
                        <option>07:00 PM</option>
                        <option>07:15 PM</option>
                        <option>07:30 PM</option>
                        <option>07:45 PM</option>
                        <option>08:00 PM</option>
                        <option>08:15 PM</option>
                        <option>08:30 PM</option>
                        <option>08:45 PM</option>
                        <option>09:00 PM</option>
                        <option>09:15 PM</option>
                        <option>09:30 PM</option>
                        <option>09:45 PM</option>
                        <option>10:00 PM</option>
                        <option>10:15 PM</option>
                        <option>10:30 PM</option>
                        <option>10:45 PM</option>
                        <option>11:00 PM</option>
                        <option>11:15 PM</option>
                        <option>11:30 PM</option>
                        <option>11:45 PM</option>
                    </select>
                </div>
            </div>

            <div id="divEnd" class="col-md-2">
                <label>End Time </label>
                <div>
                    <select id="ddlEnd" name="DataParameter" size="1" class="form-control">
                        <option>Select</option>
                        <option>12:00 AM</option>
                        <option>12:15 AM</option>
                        <option>12:30 AM</option>
                        <option>12:45 AM</option>
                        <option>01:00 AM</option>
                        <option>01:15 AM</option>
                        <option>01:30 AM</option>
                        <option>01:45 AM</option>
                        <option>02:00 AM</option>
                        <option>02:15 AM</option>
                        <option>02:30 AM</option>
                        <option>02:45 AM</option>
                        <option>03:00 AM</option>
                        <option>03:15 AM</option>
                        <option>03:30 AM</option>
                        <option>03:45 AM</option>
                        <option>04:00 AM</option>
                        <option>04:15 AM</option>
                        <option>04:30 AM</option>
                        <option>04:45 AM</option>
                        <option>05:00 AM</option>
                        <option>05:15 AM</option>
                        <option>05:30 AM</option>
                        <option>05:45 AM</option>
                        <option>06:00 AM</option>
                        <option>06:15 AM</option>
                        <option>06:30 AM</option>
                        <option>06:45 AM</option>
                        <option>07:00 AM</option>
                        <option>07:15 AM</option>
                        <option>07:30 AM</option>
                        <option>07:45 AM</option>
                        <option>08:00 AM</option>
                        <option>08:15 AM</option>
                        <option>08:30 AM</option>
                        <option>08:45 AM</option>
                        <option>09:00 AM</option>
                        <option>09:15 AM</option>
                        <option>09:30 AM</option>
                        <option>09:45 AM</option>
                        <option>10:00 AM</option>
                        <option>10:15 AM</option>
                        <option>10:30 AM</option>
                        <option>10:45 AM</option>
                        <option>11:00 AM</option>
                        <option>11:15 AM</option>
                        <option>11:30 AM</option>
                        <option>11:45 AM</option>
                        <option>12:00 PM</option>
                        <option>12:15 PM</option>
                        <option>12:30 PM</option>
                        <option>12:45 PM</option>
                        <option>01:00 PM</option>
                        <option>01:15 PM</option>
                        <option>01:30 PM</option>
                        <option>01:45 PM</option>
                        <option>02:00 PM</option>
                        <option>02:15 PM</option>
                        <option>02:30 PM</option>
                        <option>02:45 PM</option>
                        <option>03:00 PM</option>
                        <option>03:15 PM</option>
                        <option>03:30 PM</option>
                        <option>03:45 PM</option>
                        <option>04:00 PM</option>
                        <option>04:15 PM</option>
                        <option>04:30 PM</option>
                        <option>04:45 PM</option>
                        <option>05:00 PM</option>
                        <option>05:15 PM</option>
                        <option>05:30 PM</option>
                        <option>05:45 PM</option>
                        <option>06:00 PM</option>
                        <option>06:15 PM</option>
                        <option>06:30 PM</option>
                        <option>06:45 PM</option>
                        <option>07:00 PM</option>
                        <option>07:15 PM</option>
                        <option>07:30 PM</option>
                        <option>07:45 PM</option>
                        <option>08:00 PM</option>
                        <option>08:15 PM</option>
                        <option>08:30 PM</option>
                        <option>08:45 PM</option>
                        <option>09:00 PM</option>
                        <option>09:15 PM</option>
                        <option>09:30 PM</option>
                        <option>09:45 PM</option>
                        <option>10:00 PM</option>
                        <option>10:15 PM</option>
                        <option>10:30 PM</option>
                        <option>10:45 PM</option>
                        <option>11:00 PM</option>
                        <option>11:15 PM</option>
                        <option>11:30 PM</option>
                        <option>11:45 PM</option>
                    </select>
                </div>
            </div>
            <div id="divSumit" class="col-md-1">
                <label>&nbsp;</label>
                <div><button type="button" onclick="Clk_Sumit()" class="btn btn-info">Submit</button>  </div>
            </div>
        </div>
    </div>

</div>
<div id="div_main" style="position:relative; height: 750px; width: 1070px; border: 0px solid #000; background-image: url(/Areas/TataPower/Images/Screen1.jpg);">

    @*lbl_grp_1                   //Group_label start with lbl_grp_ and 1 is groupuid
    val_grp_1                   //value_label start with val_grp_ and 1 is groupuid
    lbl_grp_sub_1               //sub group label start with lbl_grp_sub_ and 1 is groupuid
    val_grp_sub_1              //sub group value label start with val_grp_sub_ and 1 is  groupuid
     lbl_mtr_1                 //meter lable start with lbl_mtr_ and 1 is meterid
     val_mtr_1                 //meter value label start with val_mtr_ and 1 is meterid
    lbl_sub_mtr_1             //sub meter lable start with lbl_sub_mtr_ and 1 is meterid
    val_sub_mtr_1             //sub meter val label start with val_sub_mtr_ and 1 is meterid
     lbl_ngrp_1               //only group Name label start with  lbl_ngrp and 1 is groupuid
     val_ngrp_1               //only group Name value label start with  val_ngrp_ and 1 is groupuid
*@
    <label id="lbl_pl_total" style="position: absolute; top:100px; left:488px; width: 15%; font-size: 20px; color: black">Plant Total</label>
    <label id="lblParam_1" style="position: absolute; top: 135px;left:440px; width: 10%; font-size: 20px; color: black; text-align: center; "></label>
    <label id="val_pl_total" style="position: absolute; top: 135px;left:540px; width: 10%; font-size: 20px; color: black; text-align: center; ">288</label>

    <label id="lbl_pl_total1" style="position: absolute; top: 215px; left: 220px; width: 20%; font-size: 20px; color: black; ">Plant Total LIGHTING</label>
    <label id="lblParam_2" style="position: absolute; top: 248px; left: 220px; width: 10%; font-size: 20px; color: black; text-align: center; "></label>
    <label id="val_pl_total1" style="position: absolute; top: 248px; left: 327px; width: 10%; font-size: 20px; color: black; text-align: center; ">281</label>


    <label id="lbl_pl_total2" style="position: absolute; top:212px; left: 700px; width: 20%; font-size: 20px; color: black">Plant Total AC</label>
    <label id="lblParam_3" style="position: absolute; top: 248px;   left: 660px; width: 10%; font-size: 20px; color: black; text-align: center; "></label>
    <label id="val_pl_total2" style="position: absolute; top: 248px; left: 768px; width: 10%; font-size: 20px; color: black; text-align: center; ">7</label>


    <a href="#" onclick="Redirect('Screen_1');">
        <label id="lbl_grp_1" class="HeaderName" style="position: absolute; top: 325px; left:60px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>
    </a>
    <label id="lblParam_4"  class="ParamName" style="position: absolute; top: 363px; left: 60px; width: 10%; font-size: 20px; color: black; text-align: center; "></label>
    <label id="val_grp_1"   class="valueName" style="position: absolute; top: 363px; left: 140px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>

    <a href="#" onclick="Redirect('Screen_2');">
        <label id="lbl_grp_2" style="position: absolute; top: 435px; left: 58px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>
    </a>
    <label id="lblParam_5" style="position: absolute; top: 475px; left: 93px; width: 10%; font-size: 20px; color: black"></label>
    <label id="val_grp_2" style="position: absolute; top: 475px; left: 124px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>

    @*<a href="#" onclick="Redirect('grp_3');">
        <label id="lbl_grp_3" style="position: absolute; top: 550px; left: 58px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>
    </a>
    <label id="lblParam_6" style="position: absolute; top: 585px; left: 93px; width: 10%; font-size: 20px; color: black"></label>
    <label id="val_grp_3" style="position: absolute; top: 585px; left: 202px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>

    <a href="#" onclick="Redirect('grp_4');">
        <label id="lbl_grp_4" style="position: absolute; top: 660px; left: 58px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>
    </a>
    <label id="lblParam_7" style="position: absolute; top: 698px; left: 93px; width: 10%; font-size: 20px; color: black"></label>
    <label id="val_grp_4" style="position: absolute; top: 698px; left: 202px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>


    <a href="#" onclick="Redirect('grp_5');">
        <label id="lbl_grp_5" style="position: absolute; top: 325px; left:355px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>
    </a>
    <label id="lblParam_8" style="position: absolute; top: 363px; left: 400px; width: 10%; font-size: 20px; color: black"></label>
    <label id="val_grp_5" style="position: absolute; top: 363px; left: 202px; width: 20%; font-size: 20px; color: black; text-align: center; "></label>*@



    <label id="lblParam_2" style="position: absolute; top: 310px; left: 209px; width: 10%; font-size: 20px; color: black"></label>
</div>

<script type="text/javascript">

    var box;
    var opningtype = "na";
    $(document).ready(function () {

        $("#datepicker").datepicker({
            dateFormat: "dd/mm/yy",
            changeMonth: true,
            changeYear: true,
            maxDate: '0',
            onSelect: function (selected) {
                if ($("#ddlparam").val() == "KW") {
                    Clk_Sumit();
                }
            }
        });
        Hide("1");
        var dateObj = new Date();
        var month = ("0" + (dateObj.getMonth() + 1)).slice(-2); //months from 1-12
        var day = ("0" + dateObj.getDate()).slice(-2);
        var year = dateObj.getUTCFullYear();
        var dd = day + "/" + month + "/" + year;

        $("#datepicker").val(dd);


        $("#ddlparam").change(function () {
            var param = $('#ddlparam').val();
            if (param == null || param == "") {
                alert('Please Select Parameter', '', false, "M");
                return false;
            }
            box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
            if ($("#ddlparam").val() != null && $("#ddlparam").val() != "0" && $("#ddlparam").val() == "KW") {
                Clk_Sumit();
                Hide("1");
                opningtype = "instancetable";
            } else {
                Hide("2");
                opningtype = "na";
            }
            if (box) box.remove();
        });
        $("#ddlStart").change(function () {
            $("#div_main").hide();
        });
        $("#ddlEnd").change(function () {
            $("#div_main").hide();
        });
        opningtype = "instancetable";
        ScreenDetails();
    });
    //setInterval(ScreenDetails, 60000);
    function Redirect(labelId) {
        //alert(labelId, '', false, "M");
        return false;
    }
    function ScreenDetails() {
        if (opningtype == "instancetable") {
            Clk_Sumit();
        }
    }
    function Hide(falg) {
        if (falg == "1") {
            $("#divStart").hide();
            $("#divEnd").hide();
            $("#divSumit").hide();
            $("#div_main").hide();

        } else {
            $("#divStart").show();
            $("#divEnd").show();
            $("#divSumit").show();
            $("#div_main").hide();
        }
    }
    function Clk_Sumit() {
        if (ValidationData()) {
            $("#div_main").hide();
            var CurrDate = ConvertDateMMDDYYYY($("#datepicker").val());//GetFinaldate($("#datepicker").val(), "MM/dd/yyyy", "dd/MM/yyyy");
            var GroupListArr = GroupArray();
            var GroupList = GetGroupString(GroupListArr);

            var SubGroupListArr = SubGroupArray();
            var Subgroups = GetGroupString(SubGroupListArr);

            var MeterListArr = MeterListArray();
            var MeterList = GetGroupString(MeterListArr);

            var SubMeterListArr = SubMeterListArray();
            var SubMeters = GetGroupString(SubMeterListArr);

            var GrpNameIDArr = GroupNameArray();
            var GrpNameID = GetGroupString(GrpNameIDArr);
            box = new ajaxLoader(this, { classOveride: 'blue-loader', bgColor: '#000' });
            var TataScreen;
            if ($("#ddlparam").val() == "KW") {
                TataScreen = {
                    "Date": CurrDate, //Date
                    "Param": $("#ddlparam").val(), //param
                    "StartTime": $("#ddlStart option:selected").text(), //Start Time
                    "EndTime": $("#ddlEnd option:selected").text(), //End Time
                    "Groupid": GroupList, //Group List
                    "Meterid": MeterList, //Meter List
                    "Subgroups": Subgroups, //Sub group List
                    "SubMeters": SubMeters, //Sub Meters List
                    "Table": "INSTANCE", //Sub Meters List
                    "GrpNameID": GrpNameID,//Only want Group Name for Dispaly
                    "Extra": "0" //future purpose
                };
            } else if ($("#ddlparam").val() == "KWH") {
                TataScreen = {
                    "Date": CurrDate, //Date
                    "Param": "kwh_exp", //param
                    "StartTime": $("#ddlStart option:selected").text(), //Start Time
                    "EndTime": $("#ddlEnd option:selected").text(), //End Time
                    "Groupid": GroupList, //Group List
                    "Meterid": MeterList, //Meter List
                    "Subgroups": Subgroups, //Sub group List
                    "SubMeters": SubMeters, //Sub Meters List
                    "Table": "CONSUMPTION", //Sub Meters List
                    "GrpNameID": GrpNameID,//Only want Group Name for Dispaly
                    "Extra": "0" //future purpose
                };
            }

            $.ajax({
                type: "POST",
                contentType: "application/json;charset=utf-8",//type of data to be send
                url: BaseAddress + "TataPowerApi/GetScreenData",
                dataType: "json",//type of data to be received
                data: JSON.stringify(TataScreen),//data to be send
                async: false,
                success: function (response, status, jqXHR) {

                    if (response != undefined && response != null) {
                        AssignParamLabel();
                        var GroupList = response.GroupList;
                        var SubGroupList = response.GroupList;
                        var MeterList = response.MeterList;
                        var SubMeterList = response.SubMeterList;
                        var GroupName = response.GroupName;
                        var GrpName = "";
                        var GrpParamVal = "";
                        if (GroupList != null && GroupList.length > 0) {
                            GroupList.forEach(function (responseobj) {
                                GrpName = "lbl_grp_" + responseobj.GrpId;
                                GrpParamVal = "val_grp_" + responseobj.GrpId;

                                if (!isNaN(responseobj.Param)) {
                                    $('#' + GrpName).html(responseobj.GrpName.toString());
                                    $('#' + GrpParamVal).html(responseobj.Param.toFixed(2).toString());
                                } else {
                                    $('#' + GrpName).html(responseobj.GrpName.toString());
                                    $('#' + GrpParamVal).html("0");
                                }
                            });
                        }
                        if (SubGroupList != null && SubGroupList.length > 0) {
                            SubGroupList.forEach(function (responseobj) {
                                GrpName = "lbl_grp_sub_" + responseobj.GrpId;
                                GrpParamVal = "val_grp_sub_" + responseobj.GrpId;

                                if (!isNaN(responseobj.Param)) {
                                    $('#' + GrpName).html(responseobj.GrpName.toString());
                                    $('#' + GrpParamVal).html(responseobj.Param.toFixed(2).toString());
                                } else {
                                    $('#' + GrpName).html(responseobj.GrpName.toString());
                                    $('#' + GrpParamVal).html("0");
                                }
                            });
                        }
                        if (MeterList != null && MeterList.length > 0) {
                            MeterList.forEach(function (responseobj) {
                                GrpName = "lbl_mtr_" + responseobj.MeterID;
                                GrpParamVal = "val_mtr_" + responseobj.MeterID;

                                if (!isNaN(responseobj.Param)) {
                                    $('#' + GrpName).html(responseobj.MeterName.toString());
                                    $('#' + GrpParamVal).html(responseobj.Param.toFixed(2).toString());
                                } else {
                                    $('#' + GrpName).html(responseobj.MeterName.toString());
                                    $('#' + GrpParamVal).html("0");
                                }
                            });
                        }
                        if (SubMeterList != null && SubMeterList.length > 0) {
                            SubMeterList.forEach(function (responseobj) {
                                GrpName = "lbl_sub_mtr_" + responseobj.MeterID;
                                GrpParamVal = "val_sub_mtr_" + responseobj.MeterID;

                                if (!isNaN(responseobj.Param)) {
                                    $('#' + GrpName).html(responseobj.MeterName.toString());
                                    $('#' + GrpParamVal).html(responseobj.Param.toFixed(2).toString());
                                } else {
                                    $('#' + GrpName).html(responseobj.MeterName.toString());
                                    $('#' + GrpParamVal).html("0");
                                }
                            });
                        }
                        if (GroupName != null && GroupName.length > 0) {
                            GroupName.forEach(function (responseobj) {
                                GrpName = "lbl_ngrp_" + responseobj.GrpId;
                                $('#' + GrpName).html(responseobj.GrpName.toString());
                            });

                        }
                        if (box) box.remove();
                    } else {
                        $("#div_main").hide();
                        alert('No data Found', '', false, "M");
                        return false;

                    }
                    $("#div_main").show();
                },
                error: function (xhr, status, error) {
                    $("#div_main").hide();
                    alert(xhr.responseText, '', false, 'E');
                    if (box) box.remove();
                }
            });
        }
    }
    function ValidationData() {
        if ($("#datepicker").val() == "" || $("#datepicker").val() == null) {
            alert('Please Select date', '', false, "M");
            return false;
        }
        if ($("#ddlparam").val() == "0" || $("#ddlparam").val() == "") {
            alert('Please Select Parameter', '', false, "M");
            return false;
        }
        var StarTime = $("#ddlStart option:selected").text();
        var End = $("#ddlEnd option:selected").text();
        if (StarTime != "Select" && End != "Select") {
            var convFrm = new Date(ConvertDateYYYYMMDD($("#datepicker").val()));
            var convTo = new Date(ConvertDateYYYYMMDD($("#datepicker").val()));

            var FromHour = GetHour(StarTime);
            var ToHour = GetHour(End);
            convFrm.setHours(convFrm.getHours() + FromHour);
            convTo.setHours(convTo.getHours() + ToHour);

            var FromMin = GetMinute(StarTime);
            var ToMin = GetMinute(End);
            convFrm.setMinutes(convFrm.getMinutes() + FromMin);
            convTo.setMinutes(convTo.getMinutes() + ToMin);

            if (convFrm > convTo) {
                alert('Start Time not greater than To Time', '', false, "M");
                return false;
            }
        }
        else {
            if (StarTime != "Select" || End != "Select") {
                if (StarTime == "Select") {
                    alert('Please Select Start Time', '', false, "M");
                    return false;
                }
                if (End == "Select") {
                    alert('Please Select End Time', '', false, "M");
                    return false;
                }
            }
        }
        return true;
    }
    function GetHour(Time) {
        var THour = 0;
        try {
            var StartArr = Time.split(' ');
            if (StartArr.length >= 1) {
                var Timer = StartArr[0].split(':')[0];
                var Type = StartArr[1];
                var hour = 0;
                Type = Type.ltrim();
                Type = Type.rtrim();
                if (Type == "PM") {
                    hour = 12;
                } else if (Type == "AM") {
                    if (Number(Timer) == 12) {
                        Timer = 0;
                    }
                    hour = 0;
                }
                THour = Number(Timer) + Number(hour);
            }
        } catch (ex) {
            THour = 0;
        }
        return THour;
    }
    function GetMinute(Time) {
        var TMin = 0;
        try {
            var StartArr = Time.split(' ');
            if (StartArr.length >= 1) {
                var Timer = StartArr[0].split(':')[1];
                TMin = Number(Timer);
            }
        } catch (ex) {
            TMin = 0;
        }
        return TMin;
    }
    function GetGroupString(StrArrayList) {
        var GrpStr = "";
        for (var i = 0; i < StrArrayList.length; i++) {
            if (StrArrayList[i] != null && StrArrayList[i] != "") {
                var SubLsit = StrArrayList[i].toString().split('~');
                for (var j = 1; j < 2; j++) {
                    if (typeof (SubLsit[j]) != 'undefined' && SubLsit[j] != null) {
                        if (GrpStr == "") {
                            GrpStr = SubLsit[j] + ",";
                        } else {
                            GrpStr += SubLsit[j] + ",";
                        }
                    }
                }
            }
        }
        GrpStr = GrpStr.substring(0, GrpStr.length - 1);
        return GrpStr;
    }
    function GetMeterString(StrArrayList) {
        var MeterStr = "";
        for (var i = 0; i < StrArrayList.length; i++) {
            if (StrArrayList[i] != null && StrArrayList[i] != "") {
                var SubLsit = StrArrayList[i].toString().split('~');
                for (var j = 2; j < SubLsit.length; j++) {
                    if (typeof (SubLsit[j]) != 'undefined' && SubLsit[j] != null) {
                        if (MeterStr == "") {
                            MeterStr = SubLsit[j] + ",";
                        } else {
                            MeterStr += SubLsit[j] + ",";
                        }
                    }
                }
            }
        }
        MeterStr = MeterStr.substring(0, MeterStr.length - 1);
        return MeterStr;
    }
    function ConvertDateYYYYMMDD(date) {
        var dateFormat = "dd/MM/yyyy";
        var DateArr;
        if (date.indexOf("/") > 0) {
            while (date.indexOf("/") > 0) {
                date = date.replace("/", "-");
                dateFormat = dateFormat.replace("/", "-");
            }
        }
        if (dateFormat.toUpperCase() == "DD-MM-YY" || dateFormat.toUpperCase() == "DD-MM-YYYY") {
            DateArr = date.split('-');
            return DateArr[2] + "-" + DateArr[1] + "-" + DateArr[0];
        } else if (dateFormat.toUpperCase() == "MM-DD-YY" || dateFormat.toUpperCase() == "MM-DD-YYYY") {
            DateArr = date.split('-');
            return DateArr[2] + "-" + DateArr[0] + "-" + DateArr[1];
        } else if (dateFormat.toUpperCase() == "YY-MM-DD" || dateFormat.toUpperCase() == "YYYY-MM-DD") {
            DateArr = date.split('-');
            return DateArr[0] + "-" + DateArr[1] + "-" + DateArr[2];
        }
    }
    function ConvertDateMMDDYYYY(date) {
        var dateFormat = "dd/MM/yyyy";
        var DateArr;
        if (date.indexOf("/") > 0) {
            while (date.indexOf("/") > 0) {
                date = date.replace("/", "-");
                dateFormat = dateFormat.replace("/", "-");
            }
        }
        if (dateFormat.toUpperCase() == "DD-MM-YY" || dateFormat.toUpperCase() == "DD-MM-YYYY") {
            DateArr = date.split('-');
            return DateArr[1] + "/" + DateArr[0] + "/" + DateArr[2];
        } else if (dateFormat.toUpperCase() == "MM-DD-YY" || dateFormat.toUpperCase() == "MM-DD-YYYY") {
            DateArr = date.split('-');
            return DateArr[0] + "/" + DateArr[1] + "/" + DateArr[2];
        } else if (dateFormat.toUpperCase() == "YY-MM-DD" || dateFormat.toUpperCase() == "YYYY-MM-DD") {
            DateArr = date.split('-');
            return DateArr[1] + "/" + DateArr[2] + "/" + DateArr[0];
        }
    }
    function GroupArray() {
        var StrArray = new Array();
        //label id~group id
        StrArray[1] = "grp_1~1";
        StrArray[2] = "grp_2~2";
        StrArray[3] = "grp_3~3";
        StrArray[4] = "grp_4~4";
        StrArray[5] = "grp_5~5";
        StrArray[6] = "grp_6~6";
        //StrArray[7] = "grp_7~70";
        //StrArray[8] = "grp_8~65";
        //StrArray[9] = "grp_9~74";
        //StrArray[10] = "grp_10~64";
        //StrArray[11] = "grp_11~75";
        //StrArray[12] = "grp_12~63";
        return StrArray;
    }

    function SubGroupArray() {
        var StrArray = new Array();
        //label id~group id
        // StrArray[1] = "grp_1~67";

        return StrArray;
    }
    function MeterListArray() {
        var StrArray = new Array();
        //label id~Meterid
        //StrArray[1] = "grp_1~67";

        return StrArray;
    }
    function SubMeterListArray() {
        var StrArray = new Array();
        //label id~Meterid
        // StrArray[1] = "grp_1~67";

        return StrArray;
    }
    function GroupNameArray() {
        var StrArray = new Array();
        //label id~Group Name
        //StrArray[1] = "grp_1~67";
        return StrArray;
    }
    function AssignParamLabel() {
        var count = 10;
        try {
            for (var i = 1; i <= count; i++) {
                var id = "lblParam_" + i;
                $('#' + id).html($("#ddlparam").val());
            }
        } catch (Ex) {

        }
    }
</script>